[5G SSB与小区搜索 | Marshall](https://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/)
## 前言

  
在5G NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。

## 同步信号（SS）

## 物理层小区ID

  
1008个唯一的物理层小区ID根据如下公式确定

$$
NIDcell=3NID(1)+NID(2)
$$

其中$ N\_{}^{}{ 0,1,...,335 } $，$ N\_{}^{}{ 0,1,2 } $。

## 主同步信号（PSS）

### 序列生成

PSS序列 $d(n)$ 根据如下公式生成

$$
dPSS(n)=1−2x(m)m=(n+43NID(2))mod1270≤n<127
$$

其中

$$
x(i+7)=(x(i+4)+x(i))mod2
$$

且

$$
[x(6)x(5)x(4)x(3)x(2)x(1)x(0)]=[1110110]
$$

### 物理资源映射

  
物理资源映射见本文SSB。

## 辅同步信号（SSS）

### 序列生成

  
SSS序列 $d(n)$ 根据如下公式生成

$$
dSSS(n)=[1−2x0((n+m0)mod127)][1−2x1((n+m1)mod127)]m0=15⌊NID(1)112⌋+5NID(2)m1=NID(1)mod1120≤n<127
$$

其中

$$
x0(i+7)=(x0(i+4)+x0(i))mod2x1(i+7)=(x1(i+1)+x1(i))mod2
$$

且

$$
[x0(6)x0(5)x0(4)x0(3)x0(2)x0(1)x0(0)]=[0000001][x1(6)x1(5)x1(4)x1(3)x1(2)x1(1)x1(0)]=[0000001]
$$

### 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## 物理广播信道（PBCH）

## 加扰

  
UE应假定比特块$ b(0),...,b(M\_{}^{ {}}-1) $在调制前进行加扰，其中$ { {M} *{}} $是PBCH传输的比特数，加扰后的比特块为$ (0),...,({ {M}* {}}-1) $

$$
b~(i)=(b(i)+c(i+vMbit))mod2
$$

其中扰码序列$ c(i) $由38.211的5.2节给定。扰码序列应在每个SSB的开始时根据$ { {c} *{}}=N* {}^{} $进行初始化

- 对于$ { {L}\_{}}=4 $，$ v $是SSB索引的2个最低有效位
- 对于$ { {L} *{}}=8 $或$ { {L}* {}}=64 $，$ v $是SSB索引的3 个最低有效位

其中 $L$ 是38.104给出的特定频带的SS/PBCH周期中的SSB的最大数目。

## 调制

  
UE应假定比特块$ (0),...,({ {M} *{}}-1) $采用QPSK调制，得到复值调制符号块$ { {d}* {}}(0),...,{ {d} *{}}({ {M}* {}}-1) $，QPSK见38.211的5.1.3节。

## 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## 解调参考信号（DM-RS）

## 序列生成

  
UE应假定SSB的参考信号序列 $r(m)$ 定义为

$$
r(m)=12(1−2⋅c(2m))+j12(1−2⋅c(2m+1))
$$

其中加扰序列 $c(n)$ 在38.211的5.2节定义。扰码序列生成器应在每个SSB 机会的开始处进行初始化

$$
cinit=211(i¯SSB+1)(⌊NIDcell/4⌋+1)+26(i¯SSB+1)+(NIDcellmod4)i¯SSB=4iSSB+nhf
$$

其中

- 若$ { {L} *{}}=4 $，则$ { {n}* {}} $是发送PBCH的半帧数目，$ { {i}\_{}} $是SSB索引的2个LSB比特
- 若$ { {L} *{}}=8 $或$ { {L}* {}}=64 $，则$ { {n} *{}}=0 $，$ { {i}* {}} $是SSB索引的3个LSB比特

其中 $L$ 是特定带宽下的SSB周期中SSB的最大数量。

## 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## SSB

## SSB的时域结构

  
在时域上，1个SSB由4个OFDM符号组成，符号在SSB内从0到3增序编号。如表7.4.3.1-1所示，PSS、SSS、PBCH及其DM-RS占用不同的符号。

在频域上，1个SSB由240个连续子载波组成，子载波在SSB内从0到239增序编号。$ k $和$ l $分别表示SSB内的频域索引和时域索引。UE可假定表7.4.3.1−1中的“Setto0”的资源粒子（RE）被设置为零。SSB的子载波0对应于公共资源块$ N\_{}^{} $的子载波$ { {k} *{0}} $，其中$ N* {}^{} $由高层参数 *offset-ref-low-scs-ref-PRB* 得到。

![](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/094753857.png "图 1 SS/PBCH block时频域结构")

与SSB部分或完全重叠的任何公共资源块应当被视为被占用，并且不被用于PDSCH或PDCCH传输。UE可假定不用于SS/PBCH传输的资源粒子，将部分重叠的公共资源的一部分设置为零。

对于SSB，UE应假定

- 天线端口 $p=4000$ ，
- PSS、SSS和PBCH具有相同的CP长度和子载波间隔，
- 对于SSB type A，$ { {k} *{0}}{... } $，$ { {k}* {0}}{... } $，$ N\_{}^{} $是就15kHz子载波间隔而言的表示，
- 对于SSB type B，$ { {k} *{0}}{... } $，$ { } $，$ N* {}^{} $是就60kHz子载波间隔而言的表示

UE可假定相同的块索引所发送的SSB关于多普勒扩展，多普勒频移，平均增益，平均延迟和空间Rx参数是准共同定位（quasi co-located，QCL）的。对于任何其他SSB传输，UE不应假定QCL。

![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/095600758.png)

### SSB中的PSS映射

  
UE应假定组成PSS的符号序列$ { {d} *{}}(0),...,{ {d}* {}}(126) $乘以幅值因子$ { {} *{}} $，以符合TS38.213中规定的PSS功率分配。符号序列按$ k $增序映射到RE$ { {( k,l )}* {p,}} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB中的频域索引和时域索引。

### SSB中的SSS映射

  
UE应假定组成PSS的符号序列$ { {d} *{}}(0),...,{ {d}* {}}(126) $乘以幅值因子$ { {} *{!!!!}} $，并按$ k $增序映射到RE$ { {( k,l )}* {p,}} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB内的频域索引和时域索引。

### SSB中的PBCH和DM-RS映射

  
UE应假定组成PBCH的符号序列$ { {d} *{}}(0),...,{ {d}* {}}({ {M} *{}}-1) $乘以幅值因子$ { {}* {!!!!}} $，以符合TS38.213中规定的PBCH功率分配。符号序列从$ { {d} *{}}(0) $开始映射到RE$ { {( k,l )}* {p,}} $，并满足下列条件：

- 这些RE不用于PDCCH DM-RS

对于不为PBCH DM-RS保留的RE的映射，按递增顺序先$ k $后$ l $映射，其中$ k $和$ l$分别是SSB内的频域和时域索引，并由表7.4.3.1-1给定。

UE应假定SSB的DM-RS复值符号序列$ { {r} *{l}}(0),...,{ {r}* {l}}(143) $乘以幅值因子$ *{}^{ {}} $，以符合TS38.213中规定的PBCH功率分配，并按递增顺序先$ k $后$ l $映射到资源粒子$ { {( k,l )}* {p,}} $，其中$ k $和$ l$分别是SSB内的频域和时域索引，并由Table 7.4.3.1-1给定，其中 $v=NIDcellmod4$ 。

## SSB的时域位置

  
在下一章描述UE将监测的可能的SSB时域位置。

## 小区搜索

  
小区搜索是UE获取与小区的时间和频率同步，并检测该小区的物理层小区ID的过程。

UE接收以下同步信号（SS）以执行小区搜索：TS38.211中定义的主同步信号（PSS）和辅同步信号（SSS）。

UE应假定PBCH、PSS和SSS在连续的符号中接收，并形成SS/PBCH block（如TS38.211中所定义）。UE应假定SSS和PBCH DM-RS具有相同的EPRE。

对于具有SSB的半帧，候选SSB的数目和第一个符号索引位置根据SSB的子载波间隔确定如下：

- Case A - 15 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14\*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。
- CaseB - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28\*n。对于载频小于或等于3 GHz的情况，n=0。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1。
- Case C - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14\*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。
- Case D - 120 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28\*n。对于载频大于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。
- Case E - 240 kHz子载波间隔：候选SSB的第一个符号的索引为{8, 12, 16, 20, 32, 36, 40, 44} + 56\*n。对于载频对于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8。
![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101842369.png)

![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101923796.png)

半帧中的候选SSB索引在时间上从0到$ L-1 $升序编号。在PBCH中发送的DM−RS序列的索引与每半帧中的SSB索引形成一一映射，若$ L=4 $，则UE应从DM−RS序列索引中确定半帧中SSB索引的2个低有效位；若$ L>4 $，则UE应从DM−RS索引中确定半帧中SSB索引的3个低有效位。若$ L=64 $，UE应从高层参数 *SSB-index-explicit* 确定每半帧中的SSB索引的3个高有效位。

UE可以通过参数 *SSB-transmitted-SIB1* 得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。UE也可以通过高层参数 *SSB-transmitted* 按照每个服务小区得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。 *SSB-transmitted* 的配置覆盖 *SSB-transmitted-SIB1* 的配置。UE可以通过高层参数 *SSB-timing* 为每个服务小区配置用于接收每个服务小区的SSB的半帧的周期。如果UE没有配置接收SSB的半帧的周期，则UE将假定周期为半帧。UE应该假定服务小区中的所有SSB的周期是相同的。

对于初始小区选择，UE可假定具有SSB的半帧以2个帧为周期。

对于没有发送SSB的服务小区，UE基于服务小区的小区群的PCell或PSCell上的SSB的接收来获取与服务小区的时间和频率同步。

> 本文参考3GPP TS38.211 V2.0.0 (2017-12)---
title: "5G SSB与小区搜索"
source: "https://marshallcomm.cn/2017/12/29/nr-v200-l1-ssb/#%E5%90%8C%E6%AD%A5%E4%BF%A1%E5%8F%B7ss"
author:
  - "[[Marshall]]"
published: 2017-12-29
created: 2025-12-12
description: "前言 在5G NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。 同步信号（SS） 物理层小区ID 1008个唯一的物理层小区ID根据如下公式确定 \[ N_{\text{ID}}^{\"
tags:
  - "clippings"
---
## 前言

  
在5G NR中，主同步信号（PSS）、辅同步信号（SSS）和PBCH共同构成一个SSB（SS/PBCH block），SSB在时域上共占用4个OFDM符号，频域共占用240个子载波（20个PRB）。本文分别介绍PSS、SSS、PBCH、SSB以及小区搜索。

## 同步信号（SS）

## 物理层小区ID

  
1008个唯一的物理层小区ID根据如下公式确定

$$
NIDcell=3NID(1)+NID(2)
$$

其中$ N\_{}^{}{ 0,1,...,335 } $，$ N\_{}^{}{ 0,1,2 } $。

## 主同步信号（PSS）

### 序列生成

PSS序列 $d(n)$ 根据如下公式生成

$$
dPSS(n)=1−2x(m)m=(n+43NID(2))mod1270≤n<127
$$

其中

$$
x(i+7)=(x(i+4)+x(i))mod2
$$

且

$$
[x(6)x(5)x(4)x(3)x(2)x(1)x(0)]=[1110110]
$$

### 物理资源映射

  
物理资源映射见本文SSB。

## 辅同步信号（SSS）

### 序列生成

  
SSS序列 $d(n)$ 根据如下公式生成

$$
dSSS(n)=[1−2x0((n+m0)mod127)][1−2x1((n+m1)mod127)]m0=15⌊NID(1)112⌋+5NID(2)m1=NID(1)mod1120≤n<127
$$

其中

$$
x0(i+7)=(x0(i+4)+x0(i))mod2x1(i+7)=(x1(i+1)+x1(i))mod2
$$

且

$$
[x0(6)x0(5)x0(4)x0(3)x0(2)x0(1)x0(0)]=[0000001][x1(6)x1(5)x1(4)x1(3)x1(2)x1(1)x1(0)]=[0000001]
$$

### 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## 物理广播信道（PBCH）

## 加扰

  
UE应假定比特块$ b(0),...,b(M\_{}^{ {}}-1) $在调制前进行加扰，其中$ { {M} *{}} $是PBCH传输的比特数，加扰后的比特块为$ (0),...,({ {M}* {}}-1) $

$$
b~(i)=(b(i)+c(i+vMbit))mod2
$$

其中扰码序列$ c(i) $由38.211的5.2节给定。扰码序列应在每个SSB的开始时根据$ { {c} *{}}=N* {}^{} $进行初始化

- 对于$ { {L}\_{}}=4 $，$ v $是SSB索引的2个最低有效位
- 对于$ { {L} *{}}=8 $或$ { {L}* {}}=64 $，$ v $是SSB索引的3 个最低有效位

其中 $L$ 是38.104给出的特定频带的SS/PBCH周期中的SSB的最大数目。

## 调制

  
UE应假定比特块$ (0),...,({ {M} *{}}-1) $采用QPSK调制，得到复值调制符号块$ { {d}* {}}(0),...,{ {d} *{}}({ {M}* {}}-1) $，QPSK见38.211的5.1.3节。

## 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## 解调参考信号（DM-RS）

## 序列生成

  
UE应假定SSB的参考信号序列 $r(m)$ 定义为

$$
r(m)=12(1−2⋅c(2m))+j12(1−2⋅c(2m+1))
$$

其中加扰序列 $c(n)$ 在38.211的5.2节定义。扰码序列生成器应在每个SSB 机会的开始处进行初始化

$$
cinit=211(i¯SSB+1)(⌊NIDcell/4⌋+1)+26(i¯SSB+1)+(NIDcellmod4)i¯SSB=4iSSB+nhf
$$

其中

- 若$ { {L} *{}}=4 $，则$ { {n}* {}} $是发送PBCH的半帧数目，$ { {i}\_{}} $是SSB索引的2个LSB比特
- 若$ { {L} *{}}=8 $或$ { {L}* {}}=64 $，则$ { {n} *{}}=0 $，$ { {i}* {}} $是SSB索引的3个LSB比特

其中 $L$ 是特定带宽下的SSB周期中SSB的最大数量。

## 物理资源映射

  
物理资源映射见“SSB的时域结构”一节。

## SSB

## SSB的时域结构

  
在时域上，1个SSB由4个OFDM符号组成，符号在SSB内从0到3增序编号。如表7.4.3.1-1所示，PSS、SSS、PBCH及其DM-RS占用不同的符号。

在频域上，1个SSB由240个连续子载波组成，子载波在SSB内从0到239增序编号。$ k $和$ l $分别表示SSB内的频域索引和时域索引。UE可假定表7.4.3.1−1中的“Setto0”的资源粒子（RE）被设置为零。SSB的子载波0对应于公共资源块$ N\_{}^{} $的子载波$ { {k} *{0}} $，其中$ N* {}^{} $由高层参数 *offset-ref-low-scs-ref-PRB* 得到。

![](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/094753857.png "图 1 SS/PBCH block时频域结构")

与SSB部分或完全重叠的任何公共资源块应当被视为被占用，并且不被用于PDSCH或PDCCH传输。UE可假定不用于SS/PBCH传输的资源粒子，将部分重叠的公共资源的一部分设置为零。

对于SSB，UE应假定

- 天线端口 $p=4000$ ，
- PSS、SSS和PBCH具有相同的CP长度和子载波间隔，
- 对于SSB type A，$ { {k} *{0}}{... } $，$ { {k}* {0}}{... } $，$ N\_{}^{} $是就15kHz子载波间隔而言的表示，
- 对于SSB type B，$ { {k} *{0}}{... } $，$ { } $，$ N* {}^{} $是就60kHz子载波间隔而言的表示

UE可假定相同的块索引所发送的SSB关于多普勒扩展，多普勒频移，平均增益，平均延迟和空间Rx参数是准共同定位（quasi co-located，QCL）的。对于任何其他SSB传输，UE不应假定QCL。

![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/095600758.png)

### SSB中的PSS映射

  
UE应假定组成PSS的符号序列$ { {d} *{}}(0),...,{ {d}* {}}(126) $乘以幅值因子$ { {} *{}} $，以符合TS38.213中规定的PSS功率分配。符号序列按$ k $增序映射到RE$ { {( k,l )}* {p,}} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB中的频域索引和时域索引。

### SSB中的SSS映射

  
UE应假定组成PSS的符号序列$ { {d} *{}}(0),...,{ {d}* {}}(126) $乘以幅值因子$ { {} *{!!!!}} $，并按$ k $增序映射到RE$ { {( k,l )}* {p,}} $，其中$ k $和$ l $由表7.4.3.1-1给定，分为表示SSB内的频域索引和时域索引。

### SSB中的PBCH和DM-RS映射

  
UE应假定组成PBCH的符号序列$ { {d} *{}}(0),...,{ {d}* {}}({ {M} *{}}-1) $乘以幅值因子$ { {}* {!!!!}} $，以符合TS38.213中规定的PBCH功率分配。符号序列从$ { {d} *{}}(0) $开始映射到RE$ { {( k,l )}* {p,}} $，并满足下列条件：

- 这些RE不用于PDCCH DM-RS

对于不为PBCH DM-RS保留的RE的映射，按递增顺序先$ k $后$ l $映射，其中$ k $和$ l$分别是SSB内的频域和时域索引，并由表7.4.3.1-1给定。

UE应假定SSB的DM-RS复值符号序列$ { {r} *{l}}(0),...,{ {r}* {l}}(143) $乘以幅值因子$ *{}^{ {}} $，以符合TS38.213中规定的PBCH功率分配，并按递增顺序先$ k $后$ l $映射到资源粒子$ { {( k,l )}* {p,}} $，其中$ k $和$ l$分别是SSB内的频域和时域索引，并由Table 7.4.3.1-1给定，其中 $v=NIDcellmod4$ 。

## SSB的时域位置

  
在下一章描述UE将监测的可能的SSB时域位置。

## 小区搜索

  
小区搜索是UE获取与小区的时间和频率同步，并检测该小区的物理层小区ID的过程。

UE接收以下同步信号（SS）以执行小区搜索：TS38.211中定义的主同步信号（PSS）和辅同步信号（SSS）。

UE应假定PBCH、PSS和SSS在连续的符号中接收，并形成SS/PBCH block（如TS38.211中所定义）。UE应假定SSS和PBCH DM-RS具有相同的EPRE。

对于具有SSB的半帧，候选SSB的数目和第一个符号索引位置根据SSB的子载波间隔确定如下：

- Case A - 15 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14\*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。
- CaseB - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28\*n。对于载频小于或等于3 GHz的情况，n=0。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1。
- Case C - 30 kHz子载波间隔：候选SSB的第一个符号的索引为{2, 8} + 14\*n。对于载频小于或等于3 GHz的情况，n=0,1。对于载频大于3 GHz且小于或等于6 GHz的情况，n=0,1,2,3。
- Case D - 120 kHz子载波间隔：候选SSB的第一个符号的索引为{4, 8, 16, 20} + 28\*n。对于载频大于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 18。
- Case E - 240 kHz子载波间隔：候选SSB的第一个符号的索引为{8, 12, 16, 20, 32, 36, 40, 44} + 56\*n。对于载频对于6 GHz的情况，n=0, 1, 2, 3, 5, 6, 7, 8。
![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101842369.png)

![mark](https://picture-1257868707.cos.ap-beijing.myqcloud.com/marshallcomm/20171229/101923796.png)

半帧中的候选SSB索引在时间上从0到$ L-1 $升序编号。在PBCH中发送的DM−RS序列的索引与每半帧中的SSB索引形成一一映射，若$ L=4 $，则UE应从DM−RS序列索引中确定半帧中SSB索引的2个低有效位；若$ L>4 $，则UE应从DM−RS索引中确定半帧中SSB索引的3个低有效位。若$ L=64 $，UE应从高层参数 *SSB-index-explicit* 确定每半帧中的SSB索引的3个高有效位。

UE可以通过参数 *SSB-transmitted-SIB1* 得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。UE也可以通过高层参数 *SSB-transmitted* 按照每个服务小区得到配置，UE不应接收与SSB对应的RE重叠的RE中的其他信号或信道的SSB索引。 *SSB-transmitted* 的配置覆盖 *SSB-transmitted-SIB1* 的配置。UE可以通过高层参数 *SSB-timing* 为每个服务小区配置用于接收每个服务小区的SSB的半帧的周期。如果UE没有配置接收SSB的半帧的周期，则UE将假定周期为半帧。UE应该假定服务小区中的所有SSB的周期是相同的。

对于初始小区选择，UE可假定具有SSB的半帧以2个帧为周期。

对于没有发送SSB的服务小区，UE基于服务小区的小区群的PCell或PSCell上的SSB的接收来获取与服务小区的时间和频率同步。

> 本文参考3GPP TS38.211 V2.0.0 (2017-12)